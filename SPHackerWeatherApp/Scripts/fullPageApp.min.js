function error(){errorMessage="Det gick inte att hämta väderuppgifterna just nu. Vänligen försök senare"}function showDetails(n){var t=n.currently,e=parseInt(localStorage.getItem("unit")),i=t.temperature,r=t.windSpeed,o=localStorage.getItem("windBearing"),s=localStorage.getItem("windspeedSymbol"),h=localStorage.getItem("unitSymbol"),c=t.humidity,l=t.pressure,a=t.ozone,u="",f=e===1?!0:!1;return console.log(f),f&&(i=(i-32)/1.8,r=r/2.236936),u="<div class='well well-lg'><p><strong>Temperatur: <\/strong> "+i.toFixed(2)+" "+h+"<\/p><p><strong>Vind: <\/strong> "+r.toFixed(2)+" "+s+" "+o+"<\/p><p><strong>Luftfuktighet: <\/strong> "+c+"<\/p><p><strong>Lufttryck: <\/strong> "+l+"<\/p><p><strong>Ozone: <\/strong> "+a+"<\/p><\/div>",skycons.add(document.getElementById("weatherIcon"),t.icon),skycons.add("icon1",t.icon),u}function getBody(n,t){t=parseInt(t);var u="",f=t===1?!0:!1,e=getUnitSymbol(t),o=getWindSpeedUnit(t),i=parseFloat(n.temperature),c=moment.unix(n.time).format("llll"),s=n.summary,h=translatewindBearing(n.windBearing),r=parseFloat(n.windSpeed);return f&&(i=(i-32)/1.8,r=r/2.236936),u="<div><h4> "+i.toFixed(1)+""+e+" "+s+"<\/h4><\/div><div><p>Vindriktning: "+h+" Vindhastighet: "+r.toFixed(0)+" "+o+"<\/p><\/div>",skycons.add(document.getElementById("icon1"),n.icon),skycons.add("icon1",n.icon),u}function setLocation(n){var t={Stockholm:{longitude:"18.00",latitude:"59.00"},Gothemburg:{longitude:"11.97",latitude:"57.7"},Malmo:{longitude:"13",latitude:"55.6"}},u=parseInt(n),r="https://api.darksky.net/forecast/"+secretKey,i="";switch(u){case 1:i=r+t.Stockholm.latitude+","+t.Stockholm.longitude;$("#cityLocation").text("Stockholm");break;case 2:i=r+t.Gothemburg.latitude+","+t.Gothemburg.longitude;$("#cityLocation").text("Göteborg");break;case 3:i=r+t.Malmo.latitude+","+t.Malmo.longitude;$("#cityLocation").text("Malmö")}return i}function showTempChart(n){"use strict";var s=parseInt(localStorage.getItem("unit")),i=n.hourly.data,h=s===1?!0:!1,r=moment.unix(i[0].time).format("dddd"),t=0,u=[],f=[],e=moment.unix(n.currently.time).format("dddd"),o,c;if(h)while(e===r)f.push(moment.unix(i[t].time).format("LT")),u.push((i[t].temperature-32)/1.8),r=moment.unix(i[t].time).format("dddd"),t++;else while(e===r)f.push(moment.unix(i[t].time).format("LT")),u.push(i[t].temperature),r=moment.unix(i[t].time).format("dddd"),t++;o=$("#todayChart");c=new Chart(o,{type:"line",data:{labels:f,datasets:[{label:"Temperatur",data:u,fill:!1,borderColor:"black",backgroundColor:"black",pointBorderColor:"tomato",pointBackgroundColor:"tomato",pointBorderWidth:1}]},options:{responsive:!0,title:{display:!0,text:"Temperatur innevarande dag"},tooltips:{mode:"label"},hover:{mode:"dataset"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Timme"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Temperature"}}]}}})}function forecastTempChart(n){"user strict";var i=[],r=[],u=[],e=parseInt(localStorage.getItem("unit")),o=e===1?!0:!1,t,f,s;if(console.log("forecastTempChart"),o)for(t=1;t<=5;t++)i.push((n[t].temperatureMin-32)/1.8),r.push((n[t].temperatureMax-32)/1.8),u.push(moment.unix(n[t].time).format("dddd"));else for(t=1;t<=5;t++)i.push(n[t].temperatureMin),r.push(n[t].temperatureMax),u.push(moment.unix(n[t].time).format("dddd"));f=$("#forecastChart");console.log(i);console.log(r);console.log(u);s=new Chart(f,{type:"line",data:{labels:u,datasets:[{label:"lägsta temperatur",data:i,fill:!1,borderColor:"lightblue",backgroundColor:"lightblue",pointBorderColor:"blue",pointBackgroundColor:"blue",pointBorderWidth:1},{label:"högsta temperatur",data:r,fill:!1,borderColor:"red",backgroundColor:"red",pointBorderColor:"tomato",pointBackgroundColor:"tomato",pointBorderWidth:1}]},options:{responsive:!0,title:{display:!0,text:"Temperatur kommande 5 dagar"},tooltips:{mode:"label"},hover:{mode:"dataset"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Dag"}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"Temperatur"}}]}}})}var secretKey="629b0a384ddac75d1c1fa827e8846375/",iconColor="black",skycons=new Skycons({color:iconColor});(function(){"user strict";$("#details").show();var r=setLocation(1),t="",i=localStorage.getItem("weatherData"),n=JSON.parse(i);showTempChart(n);forecastTempChart(n.daily.data);t=showDetails(n);$("#detailsData").html(t)})();